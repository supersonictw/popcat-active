(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{350:function(e,t,o){"use strict";o.r(t);var r=o(19),n=(o(87),o(333),o(10),o(61),o(31),o(62),o(60),o(334)),c=o.n(n),l=o(339),d=o(340),h=o.n(d),m=o(331),v=o.n(m);v.a.prototype.add=function(e){Object.assign(this,this.plus(e))},v.a.prototype.sub=function(e){Object.assign(this,this.minus(e))};var w=parseInt("800"),f=parseInt("1000"),_={name:"Index",data:function(){return{ready:!1,recovery:!1,count:new v.a(0),bot:!1,listener:null,accumulator:new v.a(0),delay_accumulator:new v.a(0),nextToken:"",captchaToken:"",leaderboard:{global:new v.a(0),regions:{}},profile:{sub:""}}},mounted:function(){this.pushPops(),this.listener=this.$sse.create(),this.listener.on("message",this.updateLeaderboard),localStorage.getItem("count")&&(this.count=new v.a(localStorage.getItem("count"))),localStorage.getItem("bot")&&(this.bot=Boolean(localStorage.getItem("bot"))),this.listener.connect()},methods:{meow:function(){this.count.add(1),this.accumulator.add(1),this.delay_accumulator.add(1),this.leaderboard.global.add(1),this.profile.sub in this.leaderboard.regions?this.leaderboard.regions[this.profile.sub].add(1):this.leaderboard.regions[this.profile.sub]=new v.a(1),localStorage.setItem("count",this.count.toString())},updateLeaderboard:function(e){for(var i in(e=h.a.parse(e)).global=new v.a(e.global),e.regions)e.regions[i]=new v.a(e.regions[i]);this.delay_accumulator.gt(0)&&(e.global.add(this.delay_accumulator),e.regions[this.profile.sub].add(this.delay_accumulator)),this.leaderboard.global=e.global,this.leaderboard.regions=e.regions},pushPops:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var o,r,n,d;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.bot||!e.accumulator.gt(0)&&e.ready&&!e.recovery){t.next=16;break}return e.accumulator.gt(w)?(o=w,e.accumulator.sub(w)):(o=e.accumulator,e.accumulator=new v.a(0)),r=c.a.stringify({token:e.nextToken,count:o.toString(),captcha_token:e.captchaToken}),t.prev=3,t.next=6,e.$axios.post("/pop?".concat(r));case 6:n=t.sent,"new_token"in(d=n.data)?(e.ready||(e.ready=!0,e.profile=h.a.parse(Object(l.a)(d.new_token.split(".")[1]))),e.recovery&&(200===n.status&&e.accumulator.add(o),201===n.status&&(e.recovery=!1)),201===n.status&&(e.delay_accumulator=new v.a(0)),e.nextToken=d.new_token):e.accumulator.add(o),t.next=16;break;case 11:t.prev=11,t.t0=t.catch(3),e.recovery=!0,e.nextToken="",e.accumulator.add(o);case 16:setTimeout(e.pushPops,f);case 17:case"end":return t.stop()}}),t,null,[[3,11]])})))()}}},y=o(80),k=o(119),x=o.n(k),I=o(328),T=o(151),S=o(88),V=o(348),j=o(349),component=Object(y.a)(_,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("v-card",{staticClass:"text-center my-10 py-5"},[o("v-card-text",[e._v(e._s(e.count))]),e._v(" "),o("v-btn",{on:{click:e.meow}},[e._v("Meow")])],1),e._v(" "),o("v-card",[o("v-card-title",[e._v(" Worldwide: "+e._s(e.leaderboard.global)+" ")]),e._v(" "),o("v-list",e._l(e.leaderboard.regions,(function(t,r){return o("v-list-item",{key:r},[e._v("\n        "+e._s(r)+": "+e._s(t)+"\n      ")])})),1)],1)],1)}),[],!1,null,null,null);t.default=component.exports;x()(component,{VBtn:I.a,VCard:T.a,VCardText:S.b,VCardTitle:S.c,VList:V.a,VListItem:j.a})}}]);